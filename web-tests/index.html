<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script type="module">
        import defaultExport from "../src/Lancelot.js";

        const game = new Lancelot.Game({
            width: 420,
            height: 480,
            background: "#242424",
            init: init
        });

        function init() {
            
            const scene = this.CreateScene("test");
            this.PlayScene("test");

            const count = 3;
            for (let i = 0; i < count; ++i) {
                const entity = scene.CreateEntity();
                entity.position.x = (i - (count - 1) / 2) * 125;
                const emitter = new Lancelot.particle.Emitter({
                    angle: { min: Math.PI * 1.4, max: 1.6 * Math.PI },
                    speed: 90,
                    lifetime: 1200,
                    angleVariance: 0.05,
                    scale: { to: 0.1 },
                });
                const pointCount = 7;
                const points = [];
                for(let i = 0; i < pointCount; ++i) {
                    const angle = Math.PI * 2 / pointCount * i;
                    const x = Math.cos(angle) * 25;
                    const y = Math.sin(angle) * 20;
                    points.push([x, y]);
                }
                entity.AddComponent(emitter);
                emitter.AddParticle(Lancelot.drawable.Polygon, {
                    points: points,
                    fillStyle: "radial;10,10,0,-10,-10,30;orange=0.5;#4A4A4A=1",
                    mode: ["overlay", "hard-light", "soft-light"][i],
                });
                emitter.Emit(1, true, 50);
            }

        }
    </script>
</body>
</html>